continue
users
continue
users
continue
User.joins(:charts).distinct.where(charts: {type: charts}).first
continue
User.joins(:charts).distinct.where(charts: {type: charts}).first
User.joins(:charts).uniq.where(charts: {type: charts}).first
User.joins(:charts).uniq.where(charts: {type: charts})
continue
User.joins(:charts).uniq.where(charts: {type: charts})
users
continue
users
continue
users
continue
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP"]})
User.joins(:charts).where(charts: {type: ["AFP"]})
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP"]})
continue
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP"]}).first
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP"]).having("count(type) = ?", 2))
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["AFP"]).having("count(type) = ?", 1))
users
continue
charts
users
continue
params[:filters][:charts]
params[:filters]
continue
params[:filters]
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP"]).having("count(type) = ?", 2))
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP"]).having("count(type) = ?", 4))
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP", "VitaminD"]).having("count(type) = ?", 4))
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP", "A"]).having("count(type) = ?", 3))
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP", "A"]).having("count(type) = ?", 2))
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP", "VitaminD"]}).first
User.find(4).charts
User.where(id: Chart.select(:user_id).group(:user_id).where(type: ["Cholesterol", "AFP"]).having("count(type) = ?", 2))
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP"]}).first
User.joins(:charts).where(charts: {types: ["Cholesterol", "AFP"]}).first
User.joins(:charts).where(charts: {type: ["Cholesterol", "AFP"]}).first
User.joins(:charts).where(charts: {type: "Cholesterol"}).first
User.includes(:charts).where(types: ["Cholesterol"]).first
User.joins(:charts).where(types: ["Cholesterol"]).first
User.joins(:charts).where(types: ["Cholesterol"])
User.joins(:charts).where(type: "Cholesterol").first
User.joins(:charts).where(type: "Cholesterol").all
User.joins(:charts).where(type: "Cholesterol")
User.joins(:charts).where(type: ["Cholesterol"])
User.joins(:charts).first
User.joins(:charts)
User.joins(:charts).where(type: ["Cholesterol"])
User.joins(:charts).where(type: ["VitaminD"])
User.joins(:charts).where(type: ["AFP"])
User.includes(:charts).where(type: ["AFP"])
User.includes(:charts).where(type: "AFP")
User.includes(:charts).where(type: "Cholesterol")
User.includes(:charts).where(tyoe: "Cholesterol")
User.includes(:charts),where(tyoe: "Cholesterol")
User.includes(:charts)
continue
params
continue
parameters
continue
User.full_name(parameters[:term]).limit(10).order(last_name: :ASC)
continue
self.current_step
last_step?
continue
current_step
continue
current_step
@chart.current_step
continue
@chart.current_step
@chart
continue
current_step
continue
self.current_step = steps[steps.index(current_step)+2]
self.current_step
current_step
continue
user_id
user_od
@current_step
current_step
continue
current_step
@current_step
continue
session[:chart_step]
params[:back_button]
@chart.valid?
@chart.current_step
@chart
continue
current_step
@current_step
continue
session[:chart_step]
@chart.current_step
@chart
continue
current_step
continue
current_step
continue
current_step
continue
current_step
continue
current_step
user_id
continue
session[:chart_step]
continue
user_id
continue
params[:back_button]
@chart.last_step?
@chart.current_step
session[:chart_step]
@chart.valid?
@chart
continue
@chart.last_step?
session[:chart_step]
params[:back_button]
@chart.current_step
@chart.valid?
@chart
continue
current_step
@current_step || steps.first
@current_step || steps.second
@current_step || "naming"
@current_step
current_step
continue
current_step
@current_step
continue
@current_step
current_step
continue
current_step
@current_step
self
continue
self
user_id
@current_step
current_step
continue
current_step
@current_step
user_id.nil?
user_id
current_step
continue
current_step
continue
current_step
continue
current_step
@current_step
continue
current_step
continue
current_step
continue
current_step
continue
current_step
@current_step
continue
current_step
@current_step
continue
!user_id.nil?
user_id.nil?
@current_step
self
continue
session[:chart_params]
params
continue
chart_params
params
continue
self
continue
session[:chart_params]
self
self.user_id
user_id
@current_step
exit
active_record_get_autocomplete_items(parameters)
items = User.where(["first_name LIKE ? or last_name LIKE ? or concat(first_name, ' ', last_name) like ?", '%'+ query + '%', '%'+ query + '%','%'+ query + '%' ])
query = parameters[:term]
where(["first_name LIKE ? or last_name LIKE ? or concat(first_name, ' ', last_name) like ?", '%'+ query + '%', '%'+ query + '%','%'+ query + '%' ])
query
continue
parameters
continue
session[:entry_params].each{|key, value| puts value }
session[:entry_params]
continue
session[:entry_params].each{|key, value| value.delete_if {|k, v| }
session[:entry_params].each{|key, value| puts value }
session[:entry_params].each{|key, value| value.delete_if {|k, v| puts v} }
session[:entry_params]
v
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
entries
continue
key
results
continue
Entry.build(session[:chart_params]["user_id"], session[:chart_params]["type"])
Entry.build(session[:chart_params]["user_id"], session[:chart_params]["type"]).first
Entry.build(session[:chart_params]["user_id"], session[:chart_params]["type"])
session[:entry_params]
session[:entry_params].deep_merge!(Entry.build(session[:chart_params]["user_id"], session[:chart_params]["type"]).first)
session[:entry_params].deep_merge!(Entry.build(session[:chart_params]["user_id"], session[:chart_params]["type"]))
